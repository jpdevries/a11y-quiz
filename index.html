<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Accessibility Quiz</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style media="screen">
      body {
        padding-bottom:3em;
      }
      fieldset {
        margin-bottom:1em;
      }
      html.js fieldset {
        display:none;
      }
      html.js fieldset.active {
        display:block;
      }
      footer {
        padding-top:1em;
        text-align:center;
      }
      footer nav button {
        margin-right:1em;
      }
      footer nav button:last-of-type {
        margin-right:0;
      }
      ol {
        list-style-type: upper-alpha;
      }
      .visually-hidden { /*https://developer.yahoo.com/blogs/ydn/clip-hidden-content-better-accessibility-53456.html*/
          position: absolute !important;
          clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
          clip: rect(1px, 1px, 1px, 1px);
          padding:0 !important;
          border:0 !important;
          height: 1px !important;
          width: 1px !important;
          overflow: hidden;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Accessibility Quiz</h1>
      <form action="/score" method="post"><!-- post the form data to /score, Node server.js will handle the syncronous form submission -->
        <div>
          <fieldset class="active">
            <legend><span class="visually-hidden">Question </span>1) Does accessibility&nbsp;rock?</legend>
            <ol>
              <li><input disabled type="radio" name="does-a11y-rock" id="does-a11y-rock-no" value="no"><label for="does-a11y-rock-no">No</label></li>
              <li><input type="radio" name="does-a11y-rock" id="does-a11y-rock-yes" value="yes"><label for="does-a11y-rock-yes">Yes</label></li>
              <li><input disabled type="radio" name="does-a11y-rock" id="does-a11y-rock-whocares" value="whocares"><label for="does-a11y-rock-whocares">Who cares</label></li>
            </ol>
          </fieldset>
          <fieldset id="q2">
            <legend><span class="visually-hidden">Question </span>2) What does the &#8220;11&#8221; in a11y stand&nbsp;for?</legend>
            <ol>
              <li><input type="radio" name="a11y-stand-for" id="a11y-stand-for-nothing" value="nothing"> <label for="a11y-stand-for-nothing">Nothing</label></li>
              <li><input type="radio" name="a11y-stand-for" id="a11y-stand-for-numchars" value="numchars"> <label for="a11y-stand-for-numchars">The number of characters in the word &#8220;accessibility&#8221;</label></li>
              <li><input type="radio" name="a11y-stand-for" id="a11y-stand-for-remind" value="remind"> <label for="a11y-stand-for-remind">The number of times you have to remind a developer accessibility is important</label></li>
            </ol>
          </fieldset>
          <fieldset id="q3">
            <legend><span class="visually-hidden">Question </span>3) Should all users be able to access content served over the World Wide&nbsp;Web?</legend>
            <ol>
              <li><input type="radio" name="should-all-access" id="should-all-access-no" value="no"> <label for="should-all-access-no">No</label></li>
              <li><input type="radio" name="should-all-access" id="should-all-access-yes" value="yes"> <label for="should-all-access-yes">Yes</label></li>
            </ol>
          </fieldset>
          <fieldset id="q4">
            <legend><span class="visually-hidden">Question </span>4) Check all that are enhanced by an accessible design&nbsp;process:</legend>
            <ol>
              <li><input type="checkbox" name="seo" id="seo" value="1"> <label for="seo">SEO</label></li>
              <li><input type="checkbox" name="performance" id="performance" value="1"> <label for="performance">Performance (Stability)</label></li>
              <li><input type="checkbox" name="optimization" id="optimization" value="1"> <label for="optimization">Optimization (Speed)</label></li>
              <li><input type="checkbox" name="usability" id="usability" value="1"> <label for="usability">Usability</label></li>
              <li><input type="checkbox" name="ux" id="ux" value="1"> <label for="ux">User Experience</label></li>
            </ol>
          </fieldset>
          <fieldset id="q5">
            <legend><span class="visually-hidden">Question </span>5) Which is the least semantic of the following HTML&nbsp;tags?</legend>
            <ol>
              <li><input type="radio" name="least-semantic" id="least-semantic-h6" value="h6"><code aria-hidden>&lt;h6&gt;</code> <label for="least-semantic-h6" class="visually-hidden">Heading Level 6</label></li>
              <li><input type="radio" name="least-semantic" id="least-semantic-li" value="li"><code aria-hidden>&lt;li&gt;</code> <label for="least-semantic-li" class="visually-hidden">List Item</label></li>
              <li><input type="radio" name="least-semantic" id="least-semantic-div" value="div"><code aria-hidden>&lt;div&gt;</code> <label for="least-semantic-div" class="visually-hidden">Div</label></li>
              <li><input type="radio" name="least-semantic" id="least-semantic-p" value="p"><code aria-hidden>&lt;p&gt;</code> <label for="least-semantic-p" class="visually-hidden">Paragraph</label></li>
            </ol>
          </fieldset>
          <fieldset id="q6">
            <legend><span class="visually-hidden">Question </span>6) Residents of which country works the most hours for 500mb of data?</legend>
            <ol>
              <li><input type="radio" name="which-country" id="which-country-india" value="india"> <label for="which-country-india">India</label></li>
              <li><input type="radio" name="which-country" id="which-country-brazil" value="brazil"> <label for="which-country-brazil">Brazil</label></li>
              <li><input type="radio" name="which-country" id="which-country-indonesia" value="indonesia"> <label for="which-country-indonesia">Indonesia</label></li>
              <li><input type="radio" name="which-country" id="which-country-germany" value="germany"> <label for="which-country-germany">Germany</label></li>
            </ol>
          </fieldset>
          <fieldset id="q7">
            <legend><span class="visually-hidden">Question </span>7) Is this quiz progressively enhanced?</legend>
            <ol>
              <li><input type="radio" name="is-enhanced" id="is-enhanced-who-cares" value="who-cares"> <label for="is-enhanced-who-cares">Who cares</label></li>
              <li><input type="radio" name="is-enhanced" id="is-enhanced-no" value="no"> <label for="is-enhanced-no">No</label></li>
              <li><input type="radio" name="is-enhanced" id="is-enhanced-yes" value="yes"> <label for="is-enhanced-yes">Yes</label></li>
            </ol>
          </fieldset>
          <fieldset id="q8">
            <legend><span class="visually-hidden">Question </span>8) Is it possible to send form data to multiple syncronous endpoints without&nbsp;JavaScript?</legend>
            <ol>
              <li><input type="radio" name="sync-endpoints" id="sync-endpoints-huh" value="huh"> <label for="sync-endpoints-huh">Huh?</label></li>
              <li><input type="radio" name="sync-endpoints" id="sync-endpoints-yes" value="yes"> <label for="sync-endpoints-yes">Yes</label></li>
              <li><input type="radio" name="sync-endpoints" id="sync-endpoints-no" value="no"> <label for="sync-endpoints-no">No</label></li>
            </ol>
          </fieldset>
          <fieldset id="q9">
            <legend><span class="visually-hidden">Question </span>9) Of the 1.1% of web users that aren't getting JavaScript enhancements what percentage of them have JavaScript&nbsp;disabled?</legend>
            <ol>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-82" value="82"> <label for="percent-nojs-82">82%</label></li>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-50" value="50"> <label for="percent-nojs-50">50%</label></li>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-100" value="100"> <label for="percent-nojs-100">100%</label></li>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-18" value="18"> <label for="percent-nojs-18">18%</label></li>
            </ol>
          </fieldset>
          <fieldset id="10">
            <legend><span class="visually-hidden">Question </span>10) What should an accessibility&ndash;minded web architect aim to provide to&nbsp;users?</legend>
            <ol>
              <li><input type="radio" name="a11y-minded-aim-to" id="a11y-minded-aim-to-equaility" value="equaility"> <label for="a11y-minded-aim-to-equaility">Equality</label></li>
              <li><input type="radio" name="a11y-minded-aim-to" id="a11y-minded-aim-to-justice" value="justice"> <label for="a11y-minded-aim-to-justice">Justice</label></li>
            </ol>
          </fieldset>
        </div>
        <input type="hidden" name="numquestions" value="10">
        <footer>
          <p aria-live="assertive"></p>
          <nav>
            <button type="submit">Submit</button>
            <button type="reset">Reset</button>
            <div style="margin-top:1em">
              <a href="https://github.com/jpdevries/a11y-quiz">Source Code</a>
            </div>
          </nav>
        </footer>
      </form>
    </main>

    <script>
      document.querySelector("html").classList.remove("no-js");
      document.querySelector("html").classList.add("js");
    </script>

    <script>
      try { // detect FormData support
        new FormData(document.querySelector("form")).entries()
      } catch(e) { // load jQuery if we can't use FormData
        console.log("Your browser doesn't support new FormData().entries() so we are loading jQuery")
        document.write('<script src="https://code.jquery.com/jquery-1.12.2.min.js"><\/script>');
      }
    </script>
    <!-- http://stuk.github.io/require1k/ - this lets us use require() in the browser -->
    <script defer>R=function(e,n,v1){function t(e,o,u,a){if(e.g)return o(e.e,e);var c=e.g=e.l,f=new XMLHttpRequest;f.onload=function(i,l){function s(){l--||o(n,e)}200==f.status||e.t?(i=[],(e.t=e.t||f.response).replace(/(?:^|[^\w\$_.])require\s*\(\s*["']([^"']*)["']\s*\)/g,function(e,n){i.push(n)}),l=i.length,i.map(function(o){t(r(e.l,o),s,"."!=o[0]?c+"/../":n,o)}),s()):u?t(e.n=r(u+="../",a),o,u,a):(e.e=f,o(f,e))},e.t?f.onload():(f.open("GET",c,!0),f.send())}function r(e,n,t){if(e.e)throw e.e;return n?(f.href=e,i.href="."!=n[0]?"./node_modules/"+n:n,t=i.href+".js",f.href="",u[t]=u[t]||{l:t}):e.n?r(e.n):(e[c]||(e.f||a("(function(require,"+c+",module){"+e.t+"\n})//# sourceURL="+e.l))(function(n){return r(r(e.l,n))},e[c]={},e),e[c])}function o(e,n){t(e.call?{l:"",t:""+e,f:e}:r("",e),function(t,o){try{e=r(o)}catch(u){t=u}n&&n(t,e)})}var u={},a=eval,c="createElement",f=e[c]("base"),i=e[c]("a");return e.head.appendChild(f),c=e.querySelector("script[data-main]"),c&&o(c.dataset.main),c="exports",o}(document);</script>
    <script defer>
    R(function(require, module, exports){ // load the same modules used in the syncronous node endpoint
      var bank = require('./assets/js/bank'),
      calculateScore = require('./assets/js/plugins').calculateScore,
      scoreMessage = require('./assets/js/plugins').scoreMessage;

      var form = document.querySelector("form"),
      fieldsets = form.querySelectorAll("fieldset"),
      numQuestions = fieldsets.length;

      form.addEventListener("submit",function(event){
        event.preventDefault();

        var a = form.querySelector("fieldset.active");
        var ns = a.nextElementSibling || undefined;
        if(ns) {
          console.log(ns);
          a.classList.remove("active");
          ns.classList.add("active");
          ns.querySelector("input").focus();
          return;
        }

        var userInput = [];
        try { // try getting form data without jQuery
          var formData = new FormData(event.target);
          for(var keyvalue of formData.entries()) {
             userInput.push(keyvalue);
          }
        } catch (e) { // use jQuery only if we need it
          userInput = $(event.target).serializeArray().map(function(value,index){
            return[value.name,value.value]
          });
        }
        var score = calculateScore(userInput,bank);
        document.querySelector("form footer p").innerHTML = scoreMessage(score,numQuestions,"javascript:document.querySelector(\'form\').reset()");
        document.querySelector("button[type=reset]").focus();
      });

      form.addEventListener("reset",function(event){
        for(var i = 0; i < numQuestions; i++) {
          (i) ? fieldsets[i].classList.remove("active") : fieldsets[i].classList.add("active");
          document.querySelector("form footer p").innerHTML = "";
          score = checkAll = 0;
        }
        document.getElementById("does-a11y-rock-yes").focus();
      });
    });
    </script>

  </body>
</html>
