<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Accessibility Quiz</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style media="screen">
      body {
        padding-bottom:3em;
      }
      fieldset {
        margin-bottom:1em;
      }
      html.js fieldset {
        display:none;
      }
      html.js fieldset.active {
        display:block;
      }
      footer {
        padding-top:1em;
        text-align:center;
      }
      footer nav button {
        margin-right:1em;
      }
      footer nav button:last-of-type {
        margin-right:0;
      }
      ol {
        list-style-type: upper-alpha;
      }
      .visually-hidden { /*https://developer.yahoo.com/blogs/ydn/clip-hidden-content-better-accessibility-53456.html*/
          position: absolute !important;
          clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
          clip: rect(1px, 1px, 1px, 1px);
          padding:0 !important;
          border:0 !important;
          height: 1px !important;
          width: 1px !important;
          overflow: hidden;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Accessibility Quiz</h1>
      <form action="#" method="post">
        <div>
          <fieldset class="active">
            <legend><span aria-hidden="true">1) </span>Does accessibility&nbsp;rock?</legend>
            <ol>
              <li><input disabled type="radio" name="does-a11y-rock" id="does-a11y-rock-no" value="no"><label for="does-a11y-rock-no">No</label></li>
              <li><input type="radio" name="does-a11y-rock" id="does-a11y-rock-yes" value="yes"><label for="does-a11y-rock-yes">Yes</label></li>
              <li><input disabled type="radio" name="does-a11y-rock" id="does-a11y-rock-whocares" value="whocares"><label for="does-a11y-rock-whocares">Who cares</label></li>
            </ol>
          </fieldset>
          <fieldset id="q2">
            <legend><span aria-hidden="true">2) </span>What does the &#8220;11&#8221; in a11y stand&nbsp;for?</legend>
            <ol>
              <li><input type="radio" name="a11y-stand-for" id="a11y-stand-for-nothing" value="nothing"> <label for="a11y-stand-for-nothing">Nothing</label></li>
              <li><input type="radio" name="a11y-stand-for" id="a11y-stand-for-numchars" value="numchars"> <label for="a11y-stand-for-numchars">The number of characters in the word &#8220;accessibility&#8221;</label></li>
              <li><input type="radio" name="a11y-stand-for" id="a11y-stand-for-remind" value="remind"> <label for="a11y-stand-for-remind">The number of times you have to remind a developer accessibility is important</label></li>
            </ol>
          </fieldset>
          <fieldset id="q3">
            <legend><span aria-hidden="true">3) </span>Should all users be able to access content served over the World Wide&nbsp;Web?</legend>
            <ol>
              <li><input type="radio" name="should-all-access" id="should-all-access-no" value="no"> <label for="should-all-access-no">No</label></li>
              <li><input type="radio" name="should-all-access" id="should-all-access-yes" value="yes"> <label for="should-all-access-yes">Yes</label></li>
            </ol>
          </fieldset>
          <fieldset id="q4">
            <legend><span aria-hidden="true">4) </span>Check all that are enhanced by an accessible design&nbsp;process:</legend>
            <ol>
              <li><input type="checkbox" name="seo" id="seo" value="1"> <label for="seo">SEO</label></li>
              <li><input type="checkbox" name="performance" id="performance" value="1"> <label for="performance">Performance (Stability)</label></li>
              <li><input type="checkbox" name="optimization" id="optimization" value="1"> <label for="optimization">Optimization (Speed)</label></li>
              <li><input type="checkbox" name="usability" id="usability" value="1"> <label for="usability">Usability</label></li>
              <li><input type="checkbox" name="ux" id="ux" value="1"> <label for="ux">User Experience</label></li>
            </ol>
          </fieldset>
          <fieldset id="q5">
            <legend><span aria-hidden="true">5) </span>Which is the least semantic of the following HTML&nbsp;tags?</legend>
            <ol>
              <li><input type="radio" name="least-semantic" id="least-semantic-h6" value="h6"><code aria-hidden>&lt;h6&gt;</code> <label for="least-semantic-h6" class="visually-hidden">Heading Level 6</label></li>
              <li><input type="radio" name="least-semantic" id="least-semantic-li" value="li"><code aria-hidden>&lt;li&gt;</code> <label for="least-semantic-li" class="visually-hidden">List Item</label></li>
              <li><input type="radio" name="least-semantic" id="least-semantic-div" value="div"><code aria-hidden>&lt;div&gt;</code> <label for="least-semantic-div" class="visually-hidden">Div</label></li>
              <li><input type="radio" name="least-semantic" id="least-semantic-p" value="p"><code aria-hidden>&lt;p&gt;</code> <label for="least-semantic-p" class="visually-hidden">Paragraph</label></li>
            </ol>
          </fieldset>
          <fieldset id="q6">
            <legend><span aria-hidden="true">6) </span>Residents of which country works the most hours for 500mb of data?</legend>
            <ol>
              <li><input type="radio" name="which-country" id="which-country-india" value="india"> <label for="which-country-india">India</label></li>
              <li><input type="radio" name="which-country" id="which-country-brazil" value="brazil"> <label for="which-country-brazil">Brazil</label></li>
              <li><input type="radio" name="which-country" id="which-country-indonesia" value="indonesia"> <label for="which-country-indonesia">Indonesia</label></li>
              <li><input type="radio" name="which-country" id="which-country-germany" value="germany"> <label for="which-country-germany">Germany</label></li>
            </ol>
          </fieldset>
          <fieldset id="q7">
            <legend><span aria-hidden="true">7) </span>Is this quiz progressively enhanced?</legend>
            <ol>
              <li><input type="radio" name="is-enhanced" id="is-enhanced-who-cares" value="who-cares"> <label for="is-enhanced-who-cares">Who cares</label></li>
              <li><input type="radio" name="is-enhanced" id="is-enhanced-no" value="no"> <label for="is-enhanced-no">No</label></li>
              <li><input type="radio" name="is-enhanced" id="is-enhanced-yes" value="yes"> <label for="is-enhanced-yes">Yes</label></li>
            </ol>
          </fieldset>
          <fieldset id="q8">
            <legend><span aria-hidden="true">8) </span>Is it possible to send form data to multiple syncronous endpoints without&nbsp;JavaScript?</legend>
            <ol>
              <li><input type="radio" name="sync-endpoints" id="sync-endpoints-huh" value="huh"> <label for="sync-endpoints-huh">Huh?</label></li>
              <li><input type="radio" name="sync-endpoints" id="sync-endpoints-yes" value="yes"> <label for="sync-endpoints-yes">Yes</label></li>
              <li><input type="radio" name="sync-endpoints" id="sync-endpoints-no" value="no"> <label for="sync-endpoints-no">No</label></li>
            </ol>
          </fieldset>
          <fieldset id="q9">
            <legend><span aria-hidden="true">9) </span>Of the 1.1% of web users that aren't getting JavaScript enhancements what percentage of them have JavaScript&nbsp;disabled?</legend>
            <ol>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-82" value="82"> <label for="percent-nojs-82">82%</label></li>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-50" value="50"> <label for="percent-nojs-50">50%</label></li>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-100" value="100"> <label for="percent-nojs-100">100%</label></li>
              <li><input type="radio" name="percent-nojs" id="percent-nojs-18" value="18"> <label for="percent-nojs-18">18%</label></li>
            </ol>
          </fieldset>
          <fieldset id="10">
            <legend><span aria-hidden="true">10) </span>What should an accessibility&ndash;minded web architect aim to provide to&nbsp;users?</legend>
            <ol>
              <li><input type="radio" name="a11y-minded-aim-to" id="a11y-minded-aim-to-equaility" value="equaility"> <label for="a11y-minded-aim-to-equaility">Equality</label></li>
              <li><input type="radio" name="a11y-minded-aim-to" id="a11y-minded-aim-to-justice" value="justice"> <label for="a11y-minded-aim-to-justice">Justice</label></li>
            </ol>
          </fieldset>
        </div>
        <footer>
          <p aria-live="assertive"></p>
          <nav>
            <button type="submit">Submit</button>
            <button type="reset">Reset</button>
            <div style="margin-top:1em">
              <a href="https://github.com/jpdevries/a11y-quiz">Source Code</a>
            </div>
          </nav>
        </footer>
      </form>
    </main>

    <script>
      document.querySelector("html").classList.remove("no-js");
      document.querySelector("html").classList.add("js");
    </script>

    <script>
      try { // detect FormData support
        new FormData(document.querySelector("form")).entries()
      } catch(e) { // load jQuery if we can't use FormData
        console.log("Your browser doesn't support new FormData().entries() so we are loading jQuery")
        document.write('<script src="https://code.jquery.com/jquery-1.12.2.min.js"><\/script>');
      }
    </script>

    <script defer>
    var bank = {
      "does-a11y-rock":"yes",
      "a11y-stand-for":"remind",
      "should-all-access":"yes",
      "least-semantic":"div",
      "which-country":"india",
      "is-enhanced":"yes",
      "sync-endpoints":"yes",
      "percent-nojs":"18",
      "a11y-minded-aim-to":"justice",
      //"seo":"1",
      //"performance":"1",
      //"optimization":"1",
      //"usability":"1",
      //"ux":"1"
    },
    form = document.querySelector("form"),
    fieldsets = form.querySelectorAll("fieldset");

    form.addEventListener("submit",function(event){
      event.preventDefault();

      var a = form.querySelector("fieldset.active");
      var ns = a.nextElementSibling || undefined;
      if(ns) {
        console.log(ns);
        a.classList.remove("active");
        ns.classList.add("active");
        ns.querySelector("input").focus();
        return;
      }

      var userInput = [];
      try { // try getting form data without jQuery
        var formData = new FormData(event.target);
        for(var keyvalue of formData.entries()) {
           userInput.push(keyvalue);
        }
      } catch (e) { // use jQuery only if we need it
        userInput = $(event.target).serializeArray().map(function(value,index){
          return[value.name,value.value]
        });
      }
      var score = 0;
      var checkAll = 0;
      for(var keyvalue of userInput) {
        if((keyvalue[0] == "seo" || keyvalue[0] == "performance" || keyvalue[0] == "optimization" || keyvalue[0] == "usability" || keyvalue[0] == "ux") && keyvalue[1] == "1") {
            checkAll++;
        }
        else if(bank[keyvalue[0]] == keyvalue[1]) score++;
      }
      if(checkAll >= 5) score++;
      document.querySelector("form footer p").innerHTML = "You got " + score + " out of " + fieldsets.length + " correct. That is a " + ((score / fieldsets.length) * 100).toFixed(2) + '% score. Use the Reset button to <a href="javascript:document.querySelector(\'form\').reset()">play again</a>.';
      document.querySelector("button[type=reset]").focus();
    });

    form.addEventListener("reset",function(event){
      for(var i = 0; i < fieldsets.length; i++) {
        (i) ? fieldsets[i].classList.remove("active") : fieldsets[i].classList.add("active");
        document.querySelector("form footer p").innerHTML = "";
        score = checkAll = 0;
      }
      document.getElementById("does-a11y-rock-yes").focus();
    });
    </script>

  </body>
</html>
